# RSA SSH Key Pair Utility Scripts

This document describes the usage and functionality of the RSA SSH keypair management scripts found in the `rsa_ssh_keypairs` directory of the repository.

## Table of Contents

- [generate_rsa_ssh_keypairs.sh](#generatersasshkeypairssh)
- [list_rsa_ssh_keypairs.sh](#listrsasshkeypairssh)
- [manage_rsa_ssh_keypairs.sh](#managersasshkeypairssh)

---

## `generate_rsa_ssh_keypairs.sh`

### Overview
Generates an RSA SSH key pair in PEM format for a project and environment. Ensures the passkey is provided, creates the necessary directory structure, and exports both private and public keys.

### Usage
```bash
./generate_rsa_ssh_keypairs.sh <project_name> <env> <passkey>
```
- `<project_name>`: Name of the project.
- `<env>`: Environment name (e.g., `dev`, `prod`).
- `<passkey>`: Passphrase for the SSH key (required).

### Features
- Creates a unique SSH directory for the specified project/environment: `$HOME/.ssh/<env>/<project_name>/key-pair/`
- Generates a 4096-bit RSA SSH key pair in PEM format, protected by the provided passphrase.
- Exports keys:
  - Private key: `id_rsa`
  - Public key: `id_rsa.pub`

### Example
```bash
./generate_rsa_ssh_keypairs.sh myproject dev mysecurepass
```

### Error Handling
- Invalid argument count or missing passkey will abort with an error.

---

## `list_rsa_ssh_keypairs.sh`

### Overview
Lists all RSA SSH key pairs generated by `generate_rsa_ssh_keypairs.sh` under a specified SSH directory (default: `$HOME/.ssh`). Displays the environment, project, and relevant key file paths.

### Usage
```bash
./list_rsa_ssh_keypairs.sh [base_ssh_dir]
```
- `[base_ssh_dir]` (optional): Root directory to scan for SSH key pairs. Defaults to `$HOME/.ssh`.

### Features
- Recursively scans for SSH directories two levels deep.
- For each found RSA key pair, displays:
  - Environment name
  - Project name
  - Key directory path
  - Private key path
  - Public key path

### Output Example
```
Environment: dev
Project: myproject
SSH Key Directory: /home/user/.ssh/dev/myproject/key-pair
  Private Key: /home/user/.ssh/dev/myproject/key-pair/id_rsa
  Public Key:  /home/user/.ssh/dev/myproject/key-pair/id_rsa.pub
----------------------------------------------------
```

### Error Handling
- If the specified directory does not exist, the script aborts.
- If no key pairs are found, a message is displayed.

---

## `manage_rsa_ssh_keypairs.sh`

### Overview
Lists and optionally deletes RSA SSH key pairs for each environment and project in a specified SSH directory (default: `$HOME/.ssh`). Provides an interactive interface for deletion.

### Usage
```bash
./manage_rsa_ssh_keypairs.sh [base_ssh_dir]
```
- `[base_ssh_dir]` (optional): Root directory to scan for SSH key pairs. Defaults to `$HOME/.ssh`.

### Features
- Lists all RSA SSH key pairs grouped by environment/project.
- Displays:
  - Index number
  - Environment
  - Project
  - Key directory path
  - Private/Public key paths
- Interactive prompt for selecting key pairs to delete by index.
- Deletion requires explicit confirmation (`"yes"`).
- Safely removes SSH key directories and cleans up empty parent directories.

### Output Example
```
1) Environment: dev
   Project: myproject
   SSH Key Directory: /home/user/.ssh/dev/myproject/key-pair
     Private Key: /home/user/.ssh/dev/myproject/key-pair/id_rsa
     Public Key:  /home/user/.ssh/dev/myproject/key-pair/id_rsa.pub
----------------------------------------------------
Enter the numbers of the key pairs you want to delete, separated by spaces (or press Enter to skip):
```

### Error Handling
- If the directory does not exist, the script aborts.
- Invalid selection indices are ignored with a warning.
- Deletion is only performed after explicit user confirmation.

### Notes
- Deletion is permanent and cannot be undone.
- After deletions, the script refreshes and displays the remaining key pairs.

---